\subsection*{Abstract}
Data-plane algorithms execute on every packet traversing a network switch; they
encompass many schemes for congestion control, scheduling, network measurement,
active-queue management, security, and load balancing. Because these algorithms
are implemented in hardware today, they cannot be changed after being built. To
address this problem, recent work has proposed designs for programmable
line-rate switches.  However, these chips have only been used to program
stateless data-plane tasks, such as packet forwarding and access control. By
contrast, many data-plane algorithms create and modify algorithmic state on a
as part of their packet processing.

This paper presents \pktlanguage, a C-like imperative language to express
data-plane algorithms. \pktlanguage introduces the notion of a {\em packet
transaction}, defined as a sequential code block that is atomic and isolated
from other such code blocks.  The \pktlanguage compiler translates \pktlanguage
code to be executed on \absmachine, a machine model based on emerging programmable switch
chipsets. We evaluate \pktlanguage by designing concrete \absmachine
machines that support \ac{can be used to express?} 
a variety of data-plane algorithms with modest die area
overhead. We then show how \pktlanguage simplifies programming such algorithms by 
comparing to expressing them using currently available languages for programmable switches.
